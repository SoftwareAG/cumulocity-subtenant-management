<c8y-title>Global Roles</c8y-title>

<c8y-action-bar-item [placement]="'right'">
  <button class="btn btn-link" (click)="createNewGlobalRole()">
    <i c8yIcon="plus"></i>
    Create Global Role </button>
</c8y-action-bar-item>

<div class="split-scroll">
  <c8y-data-grid [title]="'Global Roles - ' + tenant.name | translate " class="scroll-column sort-fix fit-w"
    [columns]="columns" [pagination]="datasource.pagination" [selectable]="false" [actionControls]="[]"
    [bulkActionControls]="[]" [serverSideDataCallback]="datasource.serverSideDataCallback">


    <c8y-column name="name">
      <ng-container *c8yCellRendererDef="let context">
        <button (click)="navigateToUpdateRole(context.item.id)" class="btn btn-link">{{ context.value }}</button>
      </ng-container>
    </c8y-column>

    <c8y-column name="roles">
      <ng-container *c8yCellRendererDef="let context">
        <div class="d-flex">{{ context.value?.references?.length || 0 }}
          <button *ngIf="context.value?.references?.length > 0" class="btn btn-clean fit-h m-l-8"
            (click)="openTenantsHavingPermissionModal(context.item, context.value?.references)"><i
              class="d-block icon-16 c8y-icon dlt-c8y-icon-info"></i></button>
        </div>
      </ng-container>
    </c8y-column>

    <c8y-column name="applications">
      <ng-container *c8yCellRendererDef="let context">
        <div class="d-flex">{{ context.value?.length || 0 }}
          <button *ngIf="context.value?.length > 0" class="btn btn-clean fit-h m-l-8"
            (click)="openRoleHavingAppModal(context.item, context.value)"><i
              class="d-block icon-16 c8y-icon dlt-c8y-icon-info"></i></button>
        </div>
      </ng-container>
    </c8y-column>

    <c8y-column name="actions1">
      <ng-container *c8yCellRendererDef="let context">
        <div class="btn-group btn-group-sm" role="group">
          <button class="btn btn-default" title="(Re-)Provision to specific subtenants"
            (click)="provisionGlobalRole(context.item)">
            <i c8yIcon="refresh"></i>
            (Re-)Provision
          </button>
          <button class="btn btn-danger" title="Delete from specific subtenants"
            (click)="deleteGlobalRole(context.item)">
            <i c8yIcon="trash"></i>
          </button>
        </div>
      </ng-container>
    </c8y-column>
  </c8y-data-grid>
</div>